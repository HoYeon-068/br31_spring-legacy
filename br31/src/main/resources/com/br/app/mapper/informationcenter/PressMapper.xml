<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.br.app.mapper.informationcenter.PressMapper">

  <resultMap id="pressMap" type="com.br.app.domain.informationcenter.PressDTO">
    <id     column="PR_ID"         property="prID"/>
    <result column="PR_NO"         property="prNO"/>
    <result column="TITLE"         property="title"/>
    <result column="CONTENT"       property="content"/>
    <result column="REG_DATE"      property="regDate"/>
    <result column="REG_DATE_TEXT" property="regDateText"/>
  </resultMap>

  <select id="selectList" resultMap="pressMap">
    SELECT *
    FROM (
      SELECT ROWNUM rn, p.*
      FROM (
        SELECT
          PR_ID,
          PR_NO,
          TITLE,
          REG_DATE,
          TO_CHAR(REG_DATE, 'YYYY-MM-DD') AS REG_DATE_TEXT
        FROM BR31.PRESS_RELEASE
        ORDER BY REG_DATE DESC
      ) p
    )
    WHERE rn BETWEEN #{startRow} AND #{endRow}
  </select>

  <select id="getTotalCount" resultType="int">
    SELECT COUNT(*)
    FROM BR31.PRESS_RELEASE
  </select>

  <select id="selectOne" resultMap="pressMap">
    SELECT
      PR_ID,
      PR_NO,
      TITLE,
      CONTENT,
      REG_DATE,
      TO_CHAR(REG_DATE, 'YYYY-MM-DD') AS REG_DATE_TEXT
    FROM BR31.PRESS_RELEASE
    WHERE PR_ID = #{id}
  </select>

</mapper>
