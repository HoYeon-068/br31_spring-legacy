<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.br.app.mapper.informationcenter.FairTradeMapper">

  <!-- ✅ DTO가 noticeID / noticeNO 이므로 resultMap으로 컬럼-프로퍼티 강제 매핑 -->
  <resultMap id="FairTradeMap" type="com.br.app.domain.informationcenter.FairTradeDTO">
    <id     column="NOTICE_ID" property="noticeID"/>
    <result column="NOTICE_NO" property="noticeNO"/>
    <result column="TITLE"     property="title"/>
    <result column="CONTENT"   property="content"/>
    <result column="REG_DATE"  property="regDate"/>
  </resultMap>

  <!-- 목록 (ROWNUM 페이징) -->
  <select id="selectList" resultMap="FairTradeMap">
    SELECT *
    FROM (
      SELECT ROWNUM rn, f.*
      FROM (
        SELECT
          NOTICE_ID,
          NOTICE_NO,
          TITLE,
          REG_DATE
        FROM FAIR_TRADE
        ORDER BY REG_DATE DESC
      ) f
    )
    WHERE rn BETWEEN #{startRow} AND #{endRow}
  </select>

  <!-- 전체 건수 -->
  <select id="getTotalCount" resultType="int">
    SELECT COUNT(*)
    FROM FAIR_TRADE
  </select>

  <!-- 상세 -->
  <select id="selectOne" resultMap="FairTradeMap">
    SELECT
      NOTICE_ID,
      NOTICE_NO,
      TITLE,
      CONTENT,
      REG_DATE
    FROM FAIR_TRADE
    WHERE NOTICE_ID = #{noticeId}
  </select>

</mapper>
