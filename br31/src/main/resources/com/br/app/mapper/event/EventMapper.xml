<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.br.app.mapper.event.EventMapper">

  <!-- List<EventDTO> selectAll(); -->
  <select id="selectAll" resultType="com.br.app.domain.event.EventDTO">
    SELECT event_id, title, start_date, end_date, img_path, evt_category_id
	FROM event
	ORDER BY CASE 
	WHEN start_date IS NULL 
	AND end_date IS NULL 
	THEN 1 ELSE 0 END, 
	start_date DESC
  </select>
  
  <!-- List<EventDTO> selectCategory(String category); -->
  <select id="selectCategory" resultType="com.br.app.domain.event.EventDTO">
    SELECT event_id, title, start_date, end_date, img_path, evt_category_id
	FROM event
	WHERE evt_category_id = #{category}
	ORDER BY
	CASE
	WHEN start_date IS NULL AND end_date IS NULL THEN 1
	ELSE 0
	END,
	start_date DESC
  </select>

</mapper>